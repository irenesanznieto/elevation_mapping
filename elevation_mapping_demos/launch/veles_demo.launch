<launch>
  <!-- Rosbag play and rviz debugging -->
  <!-- <param name ="/use_sim_time" value="true"/> 
  <node pkg="rosbag" type="play" name="player" output="screen" args="-r1 -\-clock /shared_volume/data/31_07_2020/2020-07-31-13-46-01_0.bag"/>
  <node pkg="rviz" type="rviz" name="rviz" output="screen"/> -->
    
  <!-- TF for rviz visualization -->
  <node pkg="tf" type="static_transform_publisher" name="link2_broadcaster" args="0 0 0 0 0 0 1 link_LIDAR velodyne 1000" />

  <!-- Stereo image proc -->
  <node ns="/stereo/" pkg="stereo_image_proc" type="stereo_image_proc" name="stereo_image_proc" />

  <!-- Veles throttle and downsample -->
  <node name="lidar_throttler" type="throttle" pkg="topic_tools" args="messages /velodyne_points 2 /velodyne_points_throttled" />
  <node pkg="zeromq_to_ros" type="pointcloud_downsampler" name="pointcloud_downsampler" />

  <!-- Elevation mapping node -->
  <node pkg="elevation_mapping" type="elevation_mapping" name="elevation_mapping" output="screen">
    <rosparam command="load" file="$(find elevation_mapping_demos)/config/robots/veles.yaml" />
    <rosparam command="load" file="$(find elevation_mapping_demos)/config/elevation_maps/RG_local_map_config.yaml" />
    <rosparam command="load" file="$(find elevation_mapping)/config/sensor_processors/veles_lidar.yaml" />
    <!-- <rosparam param="point_cloud_topic">/velodyne_points</rosparam> -->
    <rosparam param="point_cloud_topic">/lidar_pc</rosparam>
    <rosparam param="map_frame_id">/map</rosparam>
    <rosparam param="robot_base_frame_id">/link_veles_mobile_platform</rosparam>
    <rosparam param="sensor_frame_id">/link_LIDAR</rosparam>
    <rosparam param="track_point_frame_id">/link_veles_mobile_platform</rosparam>
  </node>
</launch>